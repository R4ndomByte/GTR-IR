<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GTR-IR Demo</title>

  <style>
    :root {
      --bg: #0b1020;
      --card: #121a2f;
      --muted: #8ea2c2;
      --text: #e8eefc;
      --acc: #6aa6ff;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 700px at 20% -10%, #1a2650, var(--bg));
    }
    .wrap { max-width: 1500px; margin: 0 auto; padding: 24px; }
    header.hero { display: grid; gap: 16px; grid-template-columns: 1fr; padding: 16px; border-radius: 16px; background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); box-shadow: var(--shadow); }
    .title { font-size: clamp(24px, 3.5vw, 36px); margin: 0; letter-spacing: .2px; }
    .subtitle { margin: 4px 0 0; color: var(--muted); font-size: 14px; }
    .badges { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
    .badge { padding: 6px 10px; background: #1b2646; color: #bcd1ff; border: 1px solid #2b3a6b; border-radius: 999px; font-size: 12px; }

    .grid { display: grid; gap: 16px; margin-top: 16px; }
    @media (min-width: 900px) { .grid { grid-template-columns: 1.4fr 1fr; } }

    .card { background: var(--card); border: 1px solid #1e2a4a; border-radius: 16px; padding: 16px; box-shadow: var(--shadow); }
    .card h3 { margin: 0 0 12px; font-size: 18px; letter-spacing: .2px; }
    .card p { margin: 0 0 10px; color: #c7d6f3; }
    .card a { color: var(--acc); text-decoration: none; }
    .card a:hover { text-decoration: underline; }

    .media { display: grid; gap: 12px; }
    .media img { width: 100%; height: auto; border-radius: 12px; border: 1px solid #26345f; background:#0b1020; }
    .thumbs { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
    @media (min-width: 520px) { .thumbs { grid-template-columns: repeat(3, 1fr); } }

    /* YouTube 16:9 響應式容器 */
    .video-wrap { width: 100%; aspect-ratio: 16/9; border-radius: 12px; overflow: hidden; border: 1px solid #26345f; background:#0b1020; }
    .video-wrap iframe { width: 100%; height: 100%; display: block; }

    /* PDF 內嵌容器（單頁 Poster，避免拖拉）
       預設直式 A 系列比例：寬:高 = 1 : 1.4142
       若你的海報是橫式，改成 aspect-ratio: 1.4142 / 1; */
    .pdf-box { position: relative; width: 100%; aspect-ratio: 1.7778 / 1; ; border-radius: 12px; overflow: hidden; border: 1px solid #26345f; background:#0b1020; }
    .pdf-box iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; display: block; }

    audio { width: 100%; }

    .list { display: grid; gap: 10px; }
    .item { padding: 10px 12px; border-radius: 12px; background: #0e1530; border: 1px solid #1a2546; }
    .item strong { display: block; }
	
	/* 只給摘要用的左右對齊樣式 */
	.justify {
	  text-align: justify;
	  text-justify: inter-word;      /* 更平均的字距 */
	  hyphens: auto;                 /* 自動斷詞（需搭配 lang="en"） */
	  -webkit-hyphens: auto;
	  -ms-hyphens: auto;
	}

    footer { margin: 24px 0 8px; text-align: center; color: var(--muted); font-size: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    

    <header class="hero" style="margin-top:16px">
      <div>
        <h1 class="title">GTR-IR: GENERATIVE TEXT-CONDITIONED MODEL FOR GUITAR CABINET IMPULSE RESPONSE — Project Page</h1>
        <p class="subtitle">
		  Jia Chang Yang<sup>1</sup>, Yu Ting Tsai<sup>2</sup><br>
		  <span><sup>1</sup> CITI, Academia Sinica</span><br>
		  <span><sup>2</sup> Master’s Program of Electro-Acoustics, Feng Chia University</span>
		</p>



        <div class="badges">
          <span class="badge">Neural Networks</span>
          <span class="badge">Guitar Cabinet Impulse Response</span>
          <span class="badge">Audio Generation</span>
		  <span class="badge">Digital Signal Processing</span>
        </div>
      </div>
    </header>
	<!-- ⬆️ Poster 置頂，並加上明顯的全螢幕/下載按鈕 -->
    <section class="card" style="margin-top:0">
	  <h3>Poster</h3>
	  <p style="margin: 6px 0 12px">
		<a href="media/Poster.pdf" target="_blank" rel="noopener noreferrer" style="margin-right:12px">
		  Open Fullscreen in New Tab
		</a>
		<a href="media/Poster.pdf" download>Download PDF</a>
	  </p>

	  <style>
		/* ==== Poster viewer ==== */
		.pdf-box {
		  position: relative;
		  width: 100%;
		  aspect-ratio: 16 / 9;            /* 桌機：固定 16:9 */
		  border-radius: 12px;
		  overflow: hidden;
		  border: 1px solid #26345f;
		  background: #0b1020;
		  min-height: 220px;
		}
		.pdf-frame {
		  position: absolute; inset: 0;
		  width: 100%; height: 100%;
		  border: 0; display: block;
		  -webkit-overflow-scrolling: touch;
		}
		/* 預設只顯示桌機 iframe */
		.pdf-desktop { display: block; }
		.pdf-mobile  { display: none;  }

		/* 手機：顯示整張 → 改為 A 系列比例（約 1:1.4142），切換到 mobile 版 iframe */
		@media (max-width: 900px) {
		  .pdf-box { aspect-ratio: 1 / 1.4142; } /* 手機：整頁剛好塞滿 */
		  .pdf-desktop { display: none; }
		  .pdf-mobile  { display: block; }
		}
	  </style>

	  <div class="pdf-box">
		<!-- 桌機版：寬度貼齊，16:9 框中可上下滑動 -->
		<iframe
		  class="pdf-frame pdf-desktop"
		  src="media/Poster.pdf#view=FitH&toolbar=0&navpanes=0&page=1"
		  title="Poster (desktop)"
		  loading="lazy"></iframe>

		<!-- 手機版：整張自動置中顯示（page-fit / Fit 皆給，提升相容性） -->
		<iframe
		  class="pdf-frame pdf-mobile"
		  src="media/Poster.pdf#zoom=page-fit&view=Fit&toolbar=0&navpanes=0&page=1"
		  title="Poster (mobile)"
		  loading="lazy"></iframe>
	  </div>
	</section>

	
    <section class="grid">
      <!-- Left: Media / Demo -->
      <div class="card">
        <h3>Video Demo</h3>
        <div class="media">
          <!-- YouTube 嵌入：使用 /embed/ 版本，16:9 自適應 -->
          <div class="video-wrap">
            <iframe
              src="https://www.youtube.com/embed/64uMSa4XhoQ?si=igmanBQoEnmq_V2b"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
              loading="lazy"></iframe>
          </div>

        </div>
      </div>

      <!-- Right: Abstract / Links -->
      <aside class="card">
		  <h3>Abstract</h3>
		  <p class="justify" lang="en">
			This study presents Guitar Text-conditioned Cabinet Impulse Response (GTR-IR), a text-conditioned generation model for synthesizing impulse response (IR) of guitar speaker cabinets. 
			Textual descriptions, including cabinet, speaker type, configuration, tone, and microphone, are encoded into feature representations using a BERT model and subsequently processed by GTR-IR model. 
			In contrast to previous studies that downsample IR to 16&nbsp;kHz with shorter durations, our approach uses IR at 48&nbsp;kHz and 2400 samples. 
			The model generates fixed-length IR and is capable of producing cabinet responses for both seen and unseen configurations. 
			Evaluations show that, across sampling rates from 44.1&nbsp;kHz to 96&nbsp;kHz, the proposed model reduces mean squared error by 96.5%, error-to-signal ratio by 39%, 
			and power spectral density error by 99.996%, while increasing magnitude-squared coherence by 8.1%, 
			compared with the MLP baseline. In addition, when compared with eight baseline architectures including Transformer, WaveNet, and CVAE, the GTR-IR achieves a mean squared error of 1.78 &times; 10<sup>&minus;7</sup>, 
			spectral correlation of 0.99998, and residual energy ratio of 0.664%, outperforming all alternatives. 
			These findings validate the effectiveness of the proposed model for guitar speaker cabinet IR generation and digital audio effects.
		  </p>

      </aside>
    </section>
	
	<!-- ===== Convolution Demo Board (Dry + 5 pairs, L→R: Input | OriIR | GenIR | Plot | AfterOri | AfterGen) ===== -->
	<!-- ===== Convolution Demo Board (Dry + 5 pairs) ===== -->
	<!-- ===== Convolution Demo Board (Dry + 5 pairs) ===== -->
	<section class="card" id="conv-demo" style="margin-top:16px">
	  <h3>Listening Demo — Dry &amp; Five Pairs</h3>

	  <style>
		/* ===== Desktop layout ===== */
		#conv-demo .grid-head,
		#conv-demo .pair-grid{
		  display:grid;
		  grid-template-columns: 1.2fr 0.8fr 0.8fr 2.6fr 0.8fr 0.8fr;
		  grid-template-areas: "spec ori gen plot aori agen";
		  gap:10px; align-items:center; text-align:center;
		}
		#conv-demo .cell-spec{grid-area:spec}
		#conv-demo .cell-ori {grid-area:ori }
		#conv-demo .cell-gen {grid-area:gen }
		#conv-demo .cell-plot{grid-area:plot}
		#conv-demo .cell-aori{grid-area:aori}
		#conv-demo .cell-agen{grid-area:agen}

		#conv-demo .pair-grid > div{
		  display:flex; flex-direction:column; align-items:center; justify-content:center;
		}
		#conv-demo audio{ width:90%; height:44px; }
		#conv-demo img.plot{
		  width:100%; max-width:480px; max-height:260px;
		  object-fit:contain; border-radius:8px; border:1px solid #26345f; background:#0b1020;
		}
		#conv-demo .dry{ display:flex; flex-direction:column; align-items:center; }
		#conv-demo .dry audio{ width:70%; height:40px; }

		/* 手機時顯示的小標籤（預設隱藏，僅行動裝置顯示） */
		#conv-demo .m-label{ display:none; }

		/* ===== Mobile layout ===== */
		@media (max-width:900px){
		  #conv-demo .grid-head{ display:none; }          /* 隱藏桌機表頭 */
		  #conv-demo .pair-grid{
			grid-template-columns:1fr;
			grid-template-areas:
			  "spec" "ori" "gen" "plot" "aori" "agen";
			gap:12px; text-align:left;
		  }
		  #conv-demo audio{ width:100%; height:48px; }
		  #conv-demo img.plot{ max-width:100%; max-height:240px; }
		  #conv-demo .dry audio{ width:100%; height:44px; }

		  /* 小標籤打開並置左 */
		  #conv-demo .m-label{
			display:inline-block; font-size:13px; font-weight:700;
			color:#c7d6f3; margin:0 0 6px; align-self:flex-start;
		  }
		  /* Input Text 內容多行顯示 */
		  #conv-demo .spec{ white-space:pre-line; text-align:left; }
		}
	  </style>

	  <!-- Dry -->
	  <div class="item dry" style="margin-bottom:10px">
		<strong>Dry Guitar Riff Sample</strong>
		<audio id="dry-audio" controls preload="metadata">
		  <source src="media/dry/guitar_riff_sample.mp3" type="audio/mpeg">
		</audio>
	  </div>

	  <!-- Desktop header row -->
	  <div class="item" style="margin-bottom:6px">
		<div class="grid-head">
		  <div>Input Text</div>
		  <div>Ori IR</div>
		  <div>Gen IR</div>
		  <div>Time-domain Waveform &amp; Frequency Response</div>
		  <div>After IR (Ori)</div>
		  <div>After IR (Gen)</div>
		</div>
	  </div>

	  <div id="pairs-wrap" class="list" style="gap:10px"></div>

	  <script>
		/* ===== Data ===== */
		const pairs = [
		  { id:"01",
			text:["Cab: Marshall 1960A (4×12, Closed)","Speaker: Celestion G12M","Mic: MD421","Pos: Cap 0°, distance 0.5 inch"].join("\n"),
			oriIR:"media/GTR_IR_Examples/[Ori_01]_1960-G12M25-421-Cap-0_5in.wav",
			genIR:"media/GTR_IR_Examples/[Gen_01]_Marshall 1960A_4x12_Celestion G12M_Sennheiser MD421_Close_Cap degree 0 0 5 inch.wav",
			plot:"media/plots/Pair01_rect.png"
		  },
		  { id:"02",
			text:["Cab: Marshall 1960A (4×12, Closed)","Speaker: Celestion G12M","Mic: KM84","Pos: ConeEdge, distance 6 inch"].join("\n"),
			oriIR:"media/GTR_IR_Examples/[Ori_02]_1960-G12M25-KM84-CapEdge-6in.wav",
			genIR:"media/GTR_IR_Examples/[Gen_02]_Marshall 1960A_4x12_Celestion G12M_KM84_ConeEdge_6in.wav",
			plot:"media/plots/Pair02_rect.png"
		  },
		  { id:"03",
			text:["Cab: Marshall 1960A (4×12, Closed)","Speaker: Celestion G12M","Mic: R121","Pos: Cap 45°, distance 3 inch"].join("\n"),
			oriIR:"media/GTR_IR_Examples/[Ori_03]_1960-G12M25-R121-Cap45-3in.wav",
			genIR:"media/GTR_IR_Examples/[Gen_03]_Marshall 1960A_4x12_Celestion G12M_R121_Cap45_3in.wav",
			plot:"media/plots/Pair03_rect.png"
		  },
		  { id:"04",
			text:["Cab: Marshall 1960A (4×12, Closed)","Speaker: Celestion G12M","Mic: MD421","Pos: CapEdge, distance 0.5 inch"].join("\n"),
			oriIR:"media/GTR_IR_Examples/[Ori_04]_1960-G12M25-421-CapEdge-0_5in.wav",
			genIR:"media/GTR_IR_Examples/[Gen_04]_Marshall 1960A_4x12_Celestion G12M_MD421_CapEdge_0.5in.wav",
			plot:"media/plots/Pair04_rect.png"
		  },
		  { id:"05",
			text:["Cab: Marshall 1960A (4×12, Closed)","Speaker: Celestion G12M","Mic: MD421","Pos: CapEdge 45°, distance 0.5 inch"].join("\n"),
			oriIR:"media/GTR_IR_Examples/[Ori_05]_1960-G12M25-421-CapEdge45-0_5in.wav",
			genIR:"media/GTR_IR_Examples/[Gen_05]_Marshall 1960A_4x12_Celestion G12M_MD421_CapEdge45_0.5in.wav",
			plot:"media/plots/Pair05_rect.png"
		  },
		];

		/* ===== Helpers ===== */
		function encodePath(path){
		  const u = new URL(path, location.href);
		  u.pathname = u.pathname.split('/').map(seg => encodeURIComponent(seg)).join('/');
		  return u.toString();
		}
		function sanitizedBase(path){ return path.split('/').pop().replace(/\s+/g,'_'); }
		function irCandidates(raw){
		  if (!/\[Gen_03]_/.test(raw)) return [raw];
		  const alt = raw.replace("Cap45-3in","Cap45_3in");
		  return raw === alt ? [raw] : [raw, alt];
		}
		function processedCandidates(id, kind, srcPath){
		  return [
			`media/processed/Pair${id}_${kind}.wav`,
			`media/processed/Pair${id}_${kind}__dry_x_${sanitizedBase(srcPath)}`
		  ];
		}
		function setAudioSmart(el, pathOrPaths){
		  const paths = Array.isArray(pathOrPaths) ? pathOrPaths : [pathOrPaths];
		  let i = 0;
		  const tryNext = () => {
			if(i >= paths.length) return;
			const raw = paths[i++], enc = encodePath(raw);
			el.onerror = () => { el.onerror = () => { tryNext(); }; el.src = raw; el.load(); };
			el.src = enc; el.load();
		  };
		  tryNext();
		}
		function setImageSmart(img, path){
		  img.onerror = () => { img.onerror = null; img.src = path; };
		  img.src = encodePath(path);
		}

		/* ===== Render rows ===== */
		const wrap = document.getElementById('pairs-wrap');

		pairs.forEach(p=>{
		  const row = document.createElement('div');
		  row.className = 'item';
		  row.style.padding = '12px';
		  row.innerHTML = `
			<div class="pair-grid">
			  <div class="cell-spec">
				<span class="m-label">Input Text</span>
				<div class="spec" style="white-space:pre-line;text-align:left">${p.text}</div>
			  </div>
			  <div class="cell-ori">
				<span class="m-label">Ori IR</span>
				<audio id="ori_${p.id}" controls preload="metadata"></audio>
			  </div>
			  <div class="cell-gen">
				<span class="m-label">Gen IR</span>
				<audio id="gen_${p.id}" controls preload="metadata"></audio>
			  </div>
			  <div class="cell-plot">
				<span class="m-label">Time-domain Waveform &amp; Frequency Response</span>
				<img id="plot_${p.id}" class="plot" alt="Pair ${p.id} Plot">
			  </div>
			  <div class="cell-aori">
				<span class="m-label">After IR (Ori)</span>
				<audio id="after_ori_${p.id}" controls preload="metadata"></audio>
			  </div>
			  <div class="cell-agen">
				<span class="m-label">After IR (Gen)</span>
				<audio id="after_gen_${p.id}" controls preload="metadata"></audio>
			  </div>
			</div>
		  `;
		  wrap.appendChild(row);

		  setAudioSmart(document.getElementById(`ori_${p.id}`), p.oriIR);
		  setAudioSmart(document.getElementById(`gen_${p.id}`), irCandidates(p.genIR));
		  setImageSmart(document.getElementById(`plot_${p.id}`), p.plot);
		  setAudioSmart(document.getElementById(`after_ori_${p.id}`), processedCandidates(p.id, 'Ori', p.oriIR));
		  setAudioSmart(document.getElementById(`after_gen_${p.id}`), processedCandidates(p.id, 'Gen', p.genIR));
		});
	  </script>
	</section>





    <footer>© 2026 GTR-IR Project Page</footer>
  </div>
</body>
</html>
